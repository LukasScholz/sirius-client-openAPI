# Automatically generated by openapi-generator (https://openapi-generator.tech)
# Please update as you see appropriate

context("Test CompoundsApi")

api_instance <- CompoundsApi$new()
request_body <- c("/home/runner/work/sirius-client-openAPI/sirius-client-openAPI/.updater/examples/ms/Bicuculline.ms", "/home/runner/work/sirius-client-openAPI/sirius-client-openAPI/.updater/examples/ms/Kaempferol.ms")
ps_api <- ProjectSpacesApi$new()


test_that("DeleteCompound", {
  # tests for DeleteCompound
  # base path: http://localhost:8080
  # Delete compound/feature with the given identifier from the specified project-space.
  # Delete compound/feature with the given identifier from the specified project-space.
  # @param project_id character project-space to delete from.
  # @param cid character identifier of compound to delete.
  # @return [Void]
  
  pid <- "compounds1"
  dir <- "./compoundsDir1"
  ps_api$CreateProjectSpace(pid, dir)
    
  api_instance$ImportCompounds(pid, request_body)
  Sys.sleep(1)
  resp <- api_instance$GetCompounds(pid)
  
  expect_equal(is.list(resp), TRUE)
  expect_equal(length(resp), 2)
  
  api_instance$DeleteCompound(pid, "1_Bicuculline_Bicuculline")
  Sys.sleep(1)
  resp <- api_instance$GetCompounds(pid)
  
  expect_equal(is.list(resp), TRUE)
  expect_equal(length(resp), 1)
    
  api_instance$DeleteCompound(pid, "1_Bicuculline_Bicuculline")
  api_instance$DeleteCompound(pid, "2_Kaempferol_Kaempferol")
  ps_api$CloseProjectSpace(pid)
  unlink(dir, recursive = TRUE)  
})

test_that("GetCompound", {
  # tests for GetCompound
  # base path: http://localhost:8080
  # Get compound/feature with the given identifier from the specified project-space.
  # Get compound/feature with the given identifier from the specified project-space.
  # @param project_id character project-space to read from.
  # @param cid character identifier of compound to access.
  # @param top_annotation character include the top annotation of this feature into the output (if available). (optional)
  # @param ms_data character include corresponding source data (MS and MS/MS) into the output. (optional)
  # @return [CompoundId]
  
  pid <- "compounds2"
  dir <- "./compoundsDir2"
  ps_api$CreateProjectSpace(pid, dir)
    
  api_instance$ImportCompounds(pid, request_body)
  Sys.sleep(1)
  resp <- api_instance$GetCompound(pid, "1_Bicuculline_Bicuculline")
  
  expect_equal(resp$name, "Bicuculline_Bicuculline")
  expect_equal(is.null(resp$topAnnotation$formulaAnnotation), TRUE)
  
  resp <- api_instance$GetCompound(pid, "1_Bicuculline_Bicuculline", TRUE)
  
  expect_equal(resp$name, "Bicuculline_Bicuculline")
  expect_equal(is.null(resp$topAnnotation$formulaAnnotation), FALSE)
    
  api_instance$DeleteCompound(pid, "1_Bicuculline_Bicuculline")
  api_instance$DeleteCompound(pid, "2_Kaempferol_Kaempferol")
  ps_api$CloseProjectSpace(pid)
  unlink(dir, recursive = TRUE)
})

test_that("GetCompounds", {
  # tests for GetCompounds
  # base path: http://localhost:8080
  # Get all available compounds/features in the given project-space.
  # Get all available compounds/features in the given project-space.
  # @param project_id character project-space to read from.
  # @param top_annotation character include the top annotation of this feature into the output (if available). (optional)
  # @param ms_data character include corresponding source data (MS and MS/MS) into the output. (optional)
  # @return [array[CompoundId]]

  pid <- "compounds3"
  dir <- "./compoundsDir3"
  ps_api$CreateProjectSpace(pid, dir)
    
  api_instance$ImportCompounds(pid, request_body)
  Sys.sleep(1)
  resp <- api_instance$GetCompounds(pid)
  
  expect_equal(is.list(resp), TRUE)
  expect_equal(length(resp), 2)
    
  api_instance$DeleteCompound(pid, "1_Bicuculline_Bicuculline")
  api_instance$DeleteCompound(pid, "2_Kaempferol_Kaempferol")
  ps_api$CloseProjectSpace(pid)
  unlink(dir, recursive = TRUE) 
})

test_that("ImportCompounds", {
  # tests for ImportCompounds
  # base path: http://localhost:8080
  # Import ms/ms data in given format from local filesystem into the specified project-space
  # Import ms/ms data in given format from local filesystem into the specified project-space.  The import will run in a background job  Possible formats (ms, mgf, cef, msp, mzML, mzXML, project-space)  &lt;p&gt;
  # @param project_id character project-space to import into.
  # @param request_body array[character] List of file and directory paths to import
  # @param align_lcms_runs character If true, multiple LCMS Runs (mzML, mzXML) will be aligned during import/feature finding (optional)
  # @param allow_ms1_only_data character  (optional)
  # @param ignore_formulas character  (optional)
  # @return [JobId]

  pid <- "compounds4"
  dir <- "./compoundsDir4"
  ps_api$CreateProjectSpace(pid, dir)
    
  resp <- api_instance$ImportCompounds(pid, request_body)
  
  expect_equal(!is.na(as.numeric(resp$id)), TRUE)
    
  api_instance$DeleteCompound(pid, "1_Bicuculline_Bicuculline")
  api_instance$DeleteCompound(pid, "2_Kaempferol_Kaempferol")
  ps_api$CloseProjectSpace(pid)
  unlink(dir, recursive = TRUE) 
})

test_that("ImportCompoundsFromString", {
  # tests for ImportCompoundsFromString
  # base path: http://localhost:8080
  # Import ms/ms data from the given format into the specified project-space  Possible formats (ms, mgf, cef, msp, mzML, mzXML)
  # Import ms/ms data from the given format into the specified project-space  Possible formats (ms, mgf, cef, msp, mzML, mzXML)
  # @param project_id character project-space to import into.
  # @param format character data format specified by the usual file extension of the format (without [.])
  # @param body character data content in specified format
  # @param source_name character name that specifies the data source. Can e.g. be a file path or just a name. (optional)
  # @return [array[CompoundId]]

  # uncomment below to test the operation
  #expect_equal(result, "EXPECTED_RESULT")
})
