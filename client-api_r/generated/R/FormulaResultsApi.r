# SIRIUS Nightsky API
#
# REST API that provides the full functionality of SIRIUS and its web services as background service. It is intended as entry-point for scripting languages and software integration SDKs.
#
# OpenAPI spec version: v0.9 on SIRIUS 5.6.3-SNAPSHOT
# 
# Generated by: https://github.com/swagger-api/swagger-codegen.git
#' @title FormulaResults operations
#' @description RSirius.FormulaResults
#'
#' @field path Stores url path of the request.
#' @field apiClient Handles the client-server communication.
#' @field userAgent Set the user agent of the request.
#'
#' @importFrom R6 R6Class
#'
#' @section Methods:
#' \describe{
#'
#' get_best_matching_canopus_predictions Best matching compound classes,  Set of the highest scoring compound classes CANOPUS) on each hierarchy level of  the ClassyFire and NPC ontology,
#'
#'
#' get_canopus_predictions All predicted compound classes (CANOPUS) from ClassyFire and NPC and their probabilities,
#'
#'
#' get_fingerprint_prediction Returns predicted fingerprint (CSI:FingerID) for the given formula result identifier  This fingerprint is used to perfom structure database search and predict compound classes.
#'
#'
#' get_formula_ids List of all FormulaResultContainers available for this compound/feature with minimal information.
#'
#'
#' get_formula_result FormulaResultContainers for the given &#x27;formulaId&#x27; with minimal information.
#'
#'
#' get_frag_tree Returns fragmentation tree (SIRIUS) for the given formula result identifier  This tree is used to rank formula candidates (treeScore).
#'
#'
#' get_simulated_isotope_pattern Returns simulated isotope pattern (SIRIUS) for the given formula result identifier.
#'
#'
#' get_structure_candidates List of StructureCandidates the given &#x27;formulaId&#x27; with minimal information.
#'
#'
#' get_top_structure_candidate Best Scoring StructureCandidate over all molecular formular resutls that belong to the specified  compound/feature (compoundId).
#'
#' }
#'
#' @export
FormulaResultsApi <- R6::R6Class(
  'FormulaResultsApi',
  public = list(
    userAgent = "Swagger-Codegen/1.0.0/r",
    apiClient = NULL,
    initialize = function(apiClient){
      if (!missing(apiClient)) {
        self$apiClient <- apiClient
      }
      else {
        self$apiClient <- ApiClient$new()
      }
    },
    get_best_matching_canopus_predictions = function(project_id, compound_id, formula_id, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      urlPath <- "/api/projects/{projectId}/compounds/{compoundId}/formulas/{formulaId}/best-canopus-predictions"
      if (!missing(`project_id`)) {
        urlPath <- gsub(paste0("\\{", "projectId", "\\}"), `project_id`, urlPath)
      }

      if (!missing(`compound_id`)) {
        urlPath <- gsub(paste0("\\{", "compoundId", "\\}"), `compound_id`, urlPath)
      }

      if (!missing(`formula_id`)) {
        urlPath <- gsub(paste0("\\{", "formulaId", "\\}"), `formula_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)
      
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        returnObject <- CompoundClasses$new()
        result <- returnObject$fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
        Response$new(returnObject, resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
    get_canopus_predictions = function(project_id, compound_id, formula_id, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      urlPath <- "/api/projects/{projectId}/compounds/{compoundId}/formulas/{formulaId}/canopus-predictions"
      if (!missing(`project_id`)) {
        urlPath <- gsub(paste0("\\{", "projectId", "\\}"), `project_id`, urlPath)
      }

      if (!missing(`compound_id`)) {
        urlPath <- gsub(paste0("\\{", "compoundId", "\\}"), `compound_id`, urlPath)
      }

      if (!missing(`formula_id`)) {
        urlPath <- gsub(paste0("\\{", "formulaId", "\\}"), `formula_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)
      
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        returnObject <- CanopusPredictions$new()
        result <- returnObject$fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
        Response$new(returnObject, resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
    get_fingerprint_prediction = function(project_id, compound_id, formula_id, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      urlPath <- "/api/projects/{projectId}/compounds/{compoundId}/formulas/{formulaId}/fingerprint"
      if (!missing(`project_id`)) {
        urlPath <- gsub(paste0("\\{", "projectId", "\\}"), `project_id`, urlPath)
      }

      if (!missing(`compound_id`)) {
        urlPath <- gsub(paste0("\\{", "compoundId", "\\}"), `compound_id`, urlPath)
      }

      if (!missing(`formula_id`)) {
        urlPath <- gsub(paste0("\\{", "formulaId", "\\}"), `formula_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)
      
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        returnObject <- Numeric$new()
        result <- returnObject$fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
        Response$new(returnObject, resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
    get_formula_ids = function(project_id, compound_id, result_overview, formula_candidate, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`result_overview`)) {
        queryParams['resultOverview'] <- result_overview
      }

      if (!missing(`formula_candidate`)) {
        queryParams['formulaCandidate'] <- formula_candidate
      }

      urlPath <- "/api/projects/{projectId}/compounds/{compoundId}/formulas"
      if (!missing(`project_id`)) {
        urlPath <- gsub(paste0("\\{", "projectId", "\\}"), `project_id`, urlPath)
      }

      if (!missing(`compound_id`)) {
        urlPath <- gsub(paste0("\\{", "compoundId", "\\}"), `compound_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)
      
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        returnObject <- FormulaResultContainer$new()
        result <- returnObject$fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
        Response$new(returnObject, resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
    get_formula_result = function(project_id, compound_id, formula_id, result_overview, formula_candidate, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`result_overview`)) {
        queryParams['resultOverview'] <- result_overview
      }

      if (!missing(`formula_candidate`)) {
        queryParams['formulaCandidate'] <- formula_candidate
      }

      urlPath <- "/api/projects/{projectId}/compounds/{compoundId}/formulas/{formulaId}"
      if (!missing(`project_id`)) {
        urlPath <- gsub(paste0("\\{", "projectId", "\\}"), `project_id`, urlPath)
      }

      if (!missing(`compound_id`)) {
        urlPath <- gsub(paste0("\\{", "compoundId", "\\}"), `compound_id`, urlPath)
      }

      if (!missing(`formula_id`)) {
        urlPath <- gsub(paste0("\\{", "formulaId", "\\}"), `formula_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)
      
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        returnObject <- FormulaResultContainer$new()
        result <- returnObject$fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
        Response$new(returnObject, resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
    get_frag_tree = function(project_id, compound_id, formula_id, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      urlPath <- "/api/projects/{projectId}/compounds/{compoundId}/formulas/{formulaId}/tree"
      if (!missing(`project_id`)) {
        urlPath <- gsub(paste0("\\{", "projectId", "\\}"), `project_id`, urlPath)
      }

      if (!missing(`compound_id`)) {
        urlPath <- gsub(paste0("\\{", "compoundId", "\\}"), `compound_id`, urlPath)
      }

      if (!missing(`formula_id`)) {
        urlPath <- gsub(paste0("\\{", "formulaId", "\\}"), `formula_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)
      
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        returnObject <- FragmentationTree$new()
        result <- returnObject$fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
        Response$new(returnObject, resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
    get_simulated_isotope_pattern = function(project_id, compound_id, formula_id, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      urlPath <- "/api/projects/{projectId}/compounds/{compoundId}/formulas/{formulaId}/isotope-pattern"
      if (!missing(`project_id`)) {
        urlPath <- gsub(paste0("\\{", "projectId", "\\}"), `project_id`, urlPath)
      }

      if (!missing(`compound_id`)) {
        urlPath <- gsub(paste0("\\{", "compoundId", "\\}"), `compound_id`, urlPath)
      }

      if (!missing(`formula_id`)) {
        urlPath <- gsub(paste0("\\{", "formulaId", "\\}"), `formula_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)
      
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        returnObject <- AnnotatedSpectrum$new()
        result <- returnObject$fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
        Response$new(returnObject, resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
    get_structure_candidates = function(project_id, compound_id, formula_id, fingerprint, db_links, pub_med_ids, top_k, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`fingerprint`)) {
        queryParams['fingerprint'] <- fingerprint
      }

      if (!missing(`db_links`)) {
        queryParams['dbLinks'] <- db_links
      }

      if (!missing(`pub_med_ids`)) {
        queryParams['pubMedIds'] <- pub_med_ids
      }

      if (!missing(`top_k`)) {
        queryParams['topK'] <- top_k
      }

      urlPath <- "/api/projects/{projectId}/compounds/{compoundId}/formulas/{formulaId}/structures"
      if (!missing(`project_id`)) {
        urlPath <- gsub(paste0("\\{", "projectId", "\\}"), `project_id`, urlPath)
      }

      if (!missing(`compound_id`)) {
        urlPath <- gsub(paste0("\\{", "compoundId", "\\}"), `compound_id`, urlPath)
      }

      if (!missing(`formula_id`)) {
        urlPath <- gsub(paste0("\\{", "formulaId", "\\}"), `formula_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)
      
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        returnObject <- StructureCandidate$new()
        result <- returnObject$fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
        Response$new(returnObject, resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
    get_top_structure_candidate = function(project_id, compound_id, fingerprint, db_links, pub_med_ids, ...){
      args <- list(...)
      queryParams <- list()
      headerParams <- character()

      if (!missing(`fingerprint`)) {
        queryParams['fingerprint'] <- fingerprint
      }

      if (!missing(`db_links`)) {
        queryParams['dbLinks'] <- db_links
      }

      if (!missing(`pub_med_ids`)) {
        queryParams['pubMedIds'] <- pub_med_ids
      }

      urlPath <- "/api/projects/{projectId}/compounds/{compoundId}/top-structure"
      if (!missing(`project_id`)) {
        urlPath <- gsub(paste0("\\{", "projectId", "\\}"), `project_id`, urlPath)
      }

      if (!missing(`compound_id`)) {
        urlPath <- gsub(paste0("\\{", "compoundId", "\\}"), `compound_id`, urlPath)
      }

      resp <- self$apiClient$callApi(url = paste0(self$apiClient$basePath, urlPath),
                                 method = "GET",
                                 queryParams = queryParams,
                                 headerParams = headerParams,
                                 body = body,
                                 ...)
      
      if (httr::status_code(resp) >= 200 && httr::status_code(resp) <= 299) {
        returnObject <- StructureCandidate$new()
        result <- returnObject$fromJSON(httr::content(resp, "text", encoding = "UTF-8"))
        Response$new(returnObject, resp)
      } else if (httr::status_code(resp) >= 400 && httr::status_code(resp) <= 499) {
        Response$new("API client error", resp)
      } else if (httr::status_code(resp) >= 500 && httr::status_code(resp) <= 599) {
        Response$new("API server error", resp)
      }

    }
  )
)
